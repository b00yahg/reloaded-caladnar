<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Barovian Campaign Calendar</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Creepster&display=swap" rel="stylesheet">
    <style>
        body {
            background-color: #1a202c;
            color: #e2e8f0;
        }
        .glow-effect {
            text-shadow: 0 0 10px rgba(255, 0, 0, 0.7);
        }
        .font-horror {
            font-family: 'Creepster', cursive;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200">
    <div id="app" class="max-w-6xl mx-auto p-4">
        <div id="calendar-container" class="bg-gray-800/90 rounded-xl shadow-lg p-6">
            <h1 class="text-5xl font-bold text-red-600 mb-6 text-center font-horror glow-effect">
                Barovian Calendar
            </h1>
            
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <div id="calendar-header" class="flex justify-between items-center mb-4">
                        <button onclick="changeDate(-1)" class="text-2xl text-red-400 hover:text-red-600">←</button>
                        <div class="text-center">
                            <h2 id="current-date" class="text-3xl font-bold font-horror"></h2>
                            <div id="moon-phase" class="text-sm text-gray-400"></div>
                        </div>
                        <button onclick="changeDate(1)" class="text-2xl text-red-400 hover:text-red-600">→</button>
                    </div>

                    <div id="calendar-grid" class="grid grid-cols-7 gap-1 text-center">
                        <div>Sun</div><div>Mon</div><div>Tue</div>
                        <div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
                    </div>
                </div>

                <div>
                    <div id="quest-section">
                        <h3 class="text-2xl font-horror text-red-400 mb-2">Active Quests</h3>
                        <div id="quest-list" class="space-y-2"></div>
                        
                        <div class="mt-4 bg-gray-700 p-3 rounded">
                            <input type="text" id="quest-title" placeholder="Quest Title" 
                                class="w-full mb-2 p-1 bg-gray-600 text-white rounded">
                            <textarea id="quest-description" placeholder="Quest Description" 
                                class="w-full mb-2 p-1 bg-gray-600 text-white rounded"></textarea>
                            <button onclick="addQuest()" 
                                class="bg-red-700 text-white px-4 py-2 rounded hover:bg-red-600">
                                Add Quest
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="event-details" class="mt-4 bg-gray-700 p-4 rounded"></div>
        </div>
    </div>

    <script>
        const BAROVIAN_MONTHS = [
            'Yinvar', 'Fivral', 'Mart', 'Apryl', 'Mai', 'Eyune',
            'Eyule', 'Avgust', 'Sintyavr', 'Octyavr', 'Neyavr', 'Dekavr'
        ];

        const DAYS_IN_MONTH = 28;
        const YEAR = 735;

        const events = [
            { date: new Date(735, 9, 27), title: "Enter Death House", description: "Players enter Death House", type: "introduction" },
            { date: new Date(735, 9, 28), title: "Arrive in Barovia", description: "Players arrive in the village of Barovia and meet Ismark and Ireena", type: "introduction" },
            { date: new Date(735, 10, 1), title: "Tarokka Reading", description: "Players receive the Tarokka reading", type: "introduction" },
            { date: new Date(735, 10, 2), title: "Arrive in Vallaki", description: "Players arrive in Vallaki at dusk", type: "introduction" },
            { date: new Date(735, 10, 2), title: "Rictavio's Arrival", description: "Ringmaster Rictavio reserves a room at the Blue Water Inn", type: "event" },
            { date: new Date(735, 10, 2), title: "Bones Stolen", description: "Milivoj steals the bones of St. Andral", type: "event" },
            { date: new Date(735, 10, 3), title: "Missing Bones Discovered", description: "Father Lucian Petrovich discovers the missing bones", type: "event" },
            { date: new Date(735, 10, 3), title: "Festival Posters", description: "Izek Strazni puts up posters for the Festival of the Blazing Sun", type: "event" },
            { date: new Date(735, 10, 3), title: "Wachter's Invitation", description: "If the players show potential resistance towards Vargas, they are invited to dinner by Lady Wachter.", type: "event" },
            { date: new Date(735, 10, 4), title: "Arabelle's Nameday", description: "Arabelle's nameday at the Vistani encampment", type: "event" },
            { date: new Date(735, 10, 4), title: "Dinner With Wachter", description: "The party enjoys a dinner with Lady Wachter", type: "event" },
            { date: new Date(735, 10, 5), title: "Ghostly Visit", description: "The Spirit of Ermaus Van Richten appears to the party", type: "deadline" },
            { date: new Date(735, 10, 6), title: "Izek Kidnaps Irena", description: "If the party fails to take care of Izek, he kidnaps Irena today", type: "deadline" },
            { date: new Date(735, 10, 7), title: "St. Andral's Feast", description: "St. Andral's Feast observed. If the party does not recover the bones, the church's ward fails", type: "deadline" },
            { date: new Date(735, 10, 7), title: "Festival of the Blazing Sun", description: "Vallaki observes the Festival of the Blazing Sun. If Irena is not saved, she burns.", type: "event" },
            { date: new Date(735, 10, 8), title: "Potential Riots", description: "Possible riots in Vallaki depending on previous events", type: "event" },
            { date: new Date(735, 10, 9), title: "Stella's Soul Lost", description: "Stella Wachter's soul vanishes into the Ethereal Plane", type: "event" },
            { date: new Date(735, 10, 9), title: "The Stolen Gem", description: "Urwin Martikov requests help to recover the stolen gem", type: "introduction" },
            { date: new Date(735, 10, 10), title: "Ezmerelda's Return", description: "Ezmerelda d'Avenir returns to the Abbey of Saint Markovia", type: "event" },
            { date: new Date(735, 10, 11), title: "Arturi Radanavich Departs", description: "Arturi Radanavich departs from the Tser Pool encampment", type: "event" },
            { date: new Date(735, 10, 11), title: "Yester Hill Ritual", description: "Druids complete the ritual at Yester Hill. If the party fails to do this by then, Wintersplinter may be unleashed", type: "deadline" },
            { date: new Date(735, 10, 13), title: "Dinner with Strahd", description: "Players dine with Strahd von Zarovich at dusk", type: "event" },
            { date: new Date(735, 10, 14), title: "Ravenloft Vulnerable", description: "Strahd is away, presenting an opportunity to infiltrate Castle Ravenloft", type: "event" },
            { date: new Date(735, 10, 15), title: "Abbot's Sinister Plan", description: "Abbot of the Abbey of St. Markovia plans to seize Baroness Anna Krezkova's heart before nightfall", type: "deadline" },
            { date: new Date(735, 10, 15), title: "Revenant Knights Warrant", description: "Commander Vladimir Horngaard gathers his revenant knights to execute a warrant for the party's deaths", type: "deadline" },
            { date: new Date(735, 10, 17), title: "First Tyrant Trial - Vallaki", description: "The first of the Tyrant Trials takes place as Strahd approaches the party in Vallaki", type: "event" },
            { date: new Date(735, 10, 17), title: "Second Tyrant Trial - Tsolenka Pass", description: "The second of the Tyrant Trials takes place as Strahd approaches the party in Tsolenka Pass", type: "event" },
            { date: new Date(735, 10, 18), title: "Third Tyrant Trial - Soldav", description: "The third of the Tyrant Trials takes place as Strahd approaches the party in Soldav", type: "event" },
            { date: new Date(735, 10, 22), title: "Argynvost's Soul Destroyed", description: "Argynvost's soul is destroyed with the lighting of the beacon", type: "event" }
        ];

        const quests = [
            { 
                title: "Escape from Death House", 
                description: "Survive the horrors of Death House", 
                startDate: new Date(735, 9, 27), 
                endDate: new Date(735, 9, 27), 
                active: true 
              },
              { 
                title: "Welcome to Barovia", 
                description: "Protect the village of Barovia from a siege", 
                startDate: new Date(735, 9, 28), 
                endDate: new Date(735, 9, 28), 
                active: true 
              },
              { 
                title: "Into the Valley", 
                description: "Journey deeper into the Valley of Barovia", 
                startDate: new Date(735, 10, 1), 
                endDate: new Date(735, 10, 2), 
                active: true 
              },
              { 
                title: "St. Andral's Feast", 
                description: "Investigate the missing bones and prevent a disaster", 
                startDate: new Date(735, 10, 3), 
                endDate: new Date(735, 10, 6), 
                active: true 
              },
              { 
                title: "The Missing Vistana", 
                description: "Find the missing Vistani child, Arabelle", 
                startDate: new Date(735, 10, 3), 
                endDate: new Date(735, 10, 9), 
                active: true 
              },
              { 
                title: "Lady Wachter's Wish", 
                description: "Navigate the political intrigue of Vallaki", 
                startDate: new Date(735, 10, 4), 
                endDate: new Date(735, 10, 9), 
                active: true 
              },
              { 
                title: "The Strazni Siblings", 
                description: "Uncover the connection between Izek and Ireena", 
                startDate: new Date(735, 10, 4), 
                endDate: new Date(735, 10, 6), 
                active: true 
              },
              { 
                title: "The Lost Soul", 
                description: "Help Victor Vallakovich with a supernatural problem", 
                startDate: new Date(735, 10, 5), 
                endDate: new Date(735, 10, 7), 
                active: true 
              },
              { 
                title: "The Walls of Krezk", 
                description: "Gain entry to the walled town of Krezk", 
                startDate: new Date(735, 10, 3), 
                endDate: new Date(735, 10, 8), 
                active: true 
              },
              { 
                title: "The Stolen Gem", 
                description: "Recover the stolen gem for the Wizard of Wines winery", 
                startDate: new Date(735, 10, 9), 
                endDate: new Date(735, 10, 16), 
                active: true 
              },
              { 
                title: "The Fallen Abbey", 
                description: "Investigate the Abbey of Saint Markovia", 
                startDate: new Date(735, 10, 11), 
                endDate: new Date(735, 10, 16), 
                active: true 
              },
              { 
                title: "The Den of Wolves", 
                description: "Deal with the werewolf threat in the Svalich Woods", 
                startDate: new Date(735, 10, 12), 
                endDate: new Date(735, 10, 16), 
                active: true 
              },
              { 
                title: "Argynvost's Beacon", 
                description: "Restore hope to the land by lighting Argynvost's beacon", 
                startDate: new Date(735, 10, 9), 
                endDate: new Date(735, 10, 16), 
                active: true 
              },
              { 
                title: "Dinner with the Devil", 
                description: "Attend a dinner invitation from Strahd von Zarovich", 
                startDate: new Date(735, 10, 14), 
                endDate: new Date(735, 10, 14), 
                active: true 
              },
              { 
                title: "Ravenloft Heist", 
                description: "Infiltrate Castle Ravenloft to gather crucial items or information", 
                startDate: new Date(735, 10, 15), 
                endDate: new Date(735, 10, 15), 
                active: true 
              }
        ];

        let currentDate = new Date(735, 9, 27);

        function getMoonPhase(date) {
            const daysSinceFullMoon = (date - new Date(735, 10, 1)) / (1000 * 60 * 60 * 24) % 14;
            if (daysSinceFullMoon === 0) return 'Full Moon';
            if (daysSinceFullMoon === 7) return 'New Moon';
            return daysSinceFullMoon < 7 ? 'Waning' : 'Waxing';
        }

        function updateCalendar() {
            const dateHeader = document.getElementById('current-date');
            const moonPhaseElement = document.getElementById('moon-phase');
            const calendarGrid = document.getElementById('calendar-grid');
            const questList = document.getElementById('quest-list');
            const eventDetails = document.getElementById('event-details');

            dateHeader.textContent = `${BAROVIAN_MONTHS[currentDate.getMonth()]} ${currentDate.getDate()}, ${YEAR}`;
            moonPhaseElement.textContent = `Moon Phase: ${getMoonPhase(currentDate)}`;

            // Clear previous grid and event details
            calendarGrid.innerHTML = '<div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>';
            eventDetails.innerHTML = '';

            // Render calendar days
            for (let i = 1; i <= DAYS_IN_MONTH; i++) {
                const dayCell = document.createElement('div');
                dayCell.textContent = i;
                dayCell.classList.add('p-2', 'border', 'cursor-pointer', 'hover:bg-gray-700');

                // Highlight current day
                if (i === currentDate.getDate()) {
                    dayCell.classList.add('bg-red-900/30');
                }

                // Mark days with events
                const dayEvents = events.filter(event => 
                    event.date.getFullYear() === currentDate.getFullYear() &&
                    event.date.getMonth() === currentDate.getMonth() &&
                    event.date.getDate() === i
                );

                if (dayEvents.length > 0) {
                    dayCell.innerHTML += ' <span class="text-yellow-500">*</span>';
                    dayCell.addEventListener('click', () => {
                        eventDetails.innerHTML = dayEvents.map(event => 
                            `<div class="mb-2">
                                <h4 class="font-bold text-yellow-400">${event.title}</h4>
                                <p>${event.description}</p>
                            </div>`
                        ).join('');
                    });
                }

                calendarGrid.appendChild(dayCell);
            }

            // Update active quests
            questList.innerHTML = quests
                .filter(quest => 
                    quest.active && 
                    currentDate >= quest.startDate && 
                    currentDate <= quest.endDate
                )
                .map(quest => 
                    `<div class="bg-gray-700 p-2 rounded">
                        <div class="flex justify-between items-center">
                            <span>${quest.title}</span>
                            <button onclick="toggleQuestStatus('${quest.title}')" 
                                class="bg-red-600 text-white px-2 py-1 rounded text-sm">
                                Complete
                            </button>
                        </div>
                        <p class="text-sm text-gray-400">${quest.description}</p>
                    </div>`
                ).join('');
        }

        function changeDate(days) {
            currentDate.setDate(currentDate.getDate() + days);
            updateCalendar();
        }

        function addQuest() {
            const titleInput = document.getElementById('quest-title');
            const descriptionInput = document.getElementById('quest-description');

            if (titleInput.value && descriptionInput.value) {
                quests.push({
                    title: titleInput.value,
                    description: descriptionInput.value,
                    startDate: currentDate,
                    endDate: new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate() + 7),
                    active: true
                });

                titleInput.value = '';
                descriptionInput.value = '';
                updateCalendar();
            }
        }

        function toggleQuestStatus(title) {
            const quest = quests.find(q => q.title === title);
            if (quest) {
                quest.active = !quest.active;
                updateCalendar();
            }
        }

        // Initialize calendar
        updateCalendar();
    </script>
</body>
</html>
